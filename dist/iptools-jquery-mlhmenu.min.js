/*! iptools-jquery-mlhmenu - v0.2.0 - 2015-11-16
* https://github.com/interactive-pioneers/iptools-jquery-mlhmenu
* Copyright Â© 2015 Interactive Pioneers GmbH; Licensed GPL-3.0 */!function(a,b,c){"use strict";function d(b,c){this.element=a(b),this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.addEvents()}var e="iptMlhMenu",f={id:"menu",title:"Menu",subtitle:"Overview",breakPalm:640,menuExtensions:[]},g={styleWhitelist:"mlhmenu-style-whitelist",normalIcon:"mlhmenu-normal-icon",activeIcon:"mlhmenu-active-icon"},h={cnt:".header__wrapper",list:".header__nav__list",item:".header__nav__list__item",item1:".level-1 > .header__nav__list__item",item2:".level-2 > .header__nav__list__item",close:".header__nav__close",actionableIcon:".header__nav__list__item__icon[data-"+g.activeIcon+"]"},i="active",j="expanded";d.prototype={addEvents:function(){this.element.find(h.item1).on("click",this,this.toggle),this.element.find(h.item2).on("mouseenter",this,this.toggleOn).on("mouseleave",this,this.toggleOff),this.element.find(h.close).on("click",this,this.close),a(b).on("resize",this,this.set).trigger("resize")},clone:function(){if(void 0!==a.mmenu){var b=this.settings.menuExtensions,c=["header__nav__list","header__nav__list__item","header__nav__list__item__link","header__nav__close","is-1-of-2","is-1-of-3","is-1-of-4","is-1-of-5","is-1-of-6"],d=this.element.clone();d.attr({id:this.settings.id,"class":""}).find("*").removeClass(c.join(" ")).not("*[data-"+g.styleWhitelist+"]").removeAttr("style"),d.mmenu({extensions:b}).on("init",this,this.init).trigger("init")}},init:function(b){var c=b.data,d={list:"> .mm-listview",title:"> .mm-navbar .mm-title",prevButton:"> .mm-navbar .mm-prev",nextButton:".mm-next",icon:".header__nav__list__item__icon"},e=c.settings.title,f=c.settings.subtitle;a(a(".mm-panel.mm-hasnavbar",this).get().reverse()).each(function(){var b=a(this),c=b.find(d.title),g=a("<li>").addClass("title").text(f+" "+c.text()),h=a(b.find(d.prevButton).attr("href")),i=h.find(d.title),j=b.find(d.list),k=h.find(d.nextButton+'[href="#'+b.attr("id")+'"]').parent().find(d.icon);k.length&&g.prepend(k.clone()),j.prepend(g),c.text(e),i.length&&c.text(i.text())})},set:function(b){var d=b.data;!a("#"+d.settings.id).length&&c.body.clientWidth<=d.settings.breakPalm&&d.clone(),c.body.clientWidth>d.settings.breakPalm&&d.element.find(h.list).each(function(){a(this).css({left:""});var b=a(this).offset().left-a(h.cnt).offset().left;a(this).css({left:-b,width:a(h.cnt).width()}),a(this).hasClass("level-2")&&a(this).css({height:""}).css({height:a(this).height()}),a(this).hasClass("level-3")&&a(this).css({paddingLeft:b-7})})},close:function(a){a.preventDefault();var b=a.data;b.element.find(h.list).removeClass(j).find(h.item).removeClass(i)},toggle:function(b){function c(){a(h.item,e.parent(h.list)).not(e).removeClass(i),e.toggleClass(i),d.element.find(h.list).removeClass(j),a("."+i+" > "+h.list).parents(h.list).addClass(j)}b.stopPropagation();var d=b.data,e=a(b.target).parent(h.item);c()},toggleOn:function(b){b.stopPropagation();var c=b.data,d=a(b.target).parent(h.item);if(a(h.item,d.parent(h.list)).removeClass(i),d.children(h.list).length&&(d.addClass(i),c.element.find(h.list).removeClass(j),a("."+i+" > "+h.list).parents(h.list).addClass(j)),a(this).find(h.actionableIcon)){var e=a(this).find(h.actionableIcon);e.css("background-image","url("+e.data(g.activeIcon)+")")}},toggleOff:function(b){b.stopPropagation();var c=b.data,d=a(b.target).parent(h.item);if(d.removeClass(i),c.element.find(h.list).removeClass(j),a("."+i+" > "+h.list).parents(h.list).addClass(j),a(this).find(h.actionableIcon)){var e=a(this).find(h.actionableIcon);e.css("background-image","url("+e.data(g.normalIcon)+")")}},destroy:function(){this.element.find(h.item1).off("click",this,this.toggle),this.element.find(h.item2).off("mouseenter",this,this.toggleOn),this.element.find(h.item2).off("mouseleave",this,this.toggleOff),this.element.find(h.close).off("click",this,this.close),a(b).off("resize",this,this.set),this.element.removeData("plugin_"+e)}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document);